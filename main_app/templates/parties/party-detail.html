{% extends 'base.html' %} 
{% load static %} 
{% block head %}
{% endblock %} 
{% block content %}
<section>
    <h1>{{party.owner.first_name}}'s {{ party.name }}</h1>
</section>
<section>
    <p>When | {{party.time}}</p>
    <p>Where | {{party.location}}</p>
    <p>Wear | {{party.dresscode}}</p>
</section>
<section>
    {% if party.owner.id == user.id %}
    <p>Invitation Code: {{party.invite_id}}</p>
    <a href ="{% url 'party-update' party.invite_id%}" class="btn">Edit Party</a>
    {% elif user.is_authenticated %}
    <form
        action="{% url 'add-rsvp' party.invite_id %}"
        method="POST"
        autocomplete="off"
    >
        {% csrf_token %}
        {{ rsvp_form.as_table }}
        <button type="submit" class="btn submit">RSVP</button>
    <form>
    {% else %}
    <p>Not logged in? Don't have an account?</p>
    <a href="{% url "signin" %}" class="btn">Log In</a>
    <a href="{% url "signup" %}" class="btn">Sign Up</a>
    {% endif %}
</section>
<section>
    <h1>Who's coming?</h1>
    <ul>
        {% for rsvp in party.rsvp_set.all %}
        <li>{{ rsvp.get_status_display }} - {{ rsvp.user.username }}</li>
        {% endfor %}
    </ul>
</section>
<section>
    <h1>Dishes</h1>
    <ul>
        {% for dish in party.dish_set.all %}
        <li>
            <a href="{% url "dish-detail" party.invite_id dish.id %}">{{ dish.name }}</a>
            <a href="{% url "dish-update" party.invite_id dish.id %}">Edit</a>
            <a href="{% url "dish-delete" party.invite_id dish.id %}">Delete</a>
        </li>
        {% endfor %}
    </ul>
    <a href="{% url "dish-create" party.invite_id %}">Add a new dish</a>
</section>
{% endblock %}